function getFileName(n){if(n.length===0)return"";let t=n[0].name;for(let i=1;i<n.length;i++)t+=", "+n[i].name;return t}function getFriendlySizeName(n){for(var i=0,t=n;t>=1024&&++i<sizeLabelsArray.length;)t=t/1024;return t.toPrecision(4)+" "+sizeLabelsArray[i]}function doSubmit(n,t){return(n&&n.preventDefault(),t=!t?$(this).attr("href"):t,!t)?console.error("This is a submit link, please specify a target reference form to submit."):(t=$(t),!t||!t.length)?console.error("Could not find the target element on page. Please provide a valid href."):t.is("form")?(t.submit(),!1):console.error("Target element is not a form. Submitting failed.")}Array.prototype.contains=function(n){return this.indexOf(n)>-1};String.prototype.shorten=function(n){var i,r,t;for(n=n||32,i="",r=this.split(" "),t=0;t<r.length;t++){if(i.length+r[t].length>n)return i+"...";i+=r[t]+" "}};const requestLimit=29989e3,sizeLabelsArray=["B","KB","MB","GB"];var modal=function(n){var i="Потвърждение",r="...",u="Продължи",f="Отказ",t=function(t){n("#modalTITLE").html(t.title||i);n("#modalCONTENT").html(t.content||r);n("#modalNO").html(t.no||f);n("#modalYES").html(t.yes||u).show();var e=n("#modalHeader");if(t.level&&e.length){t.level=t.level.toLowerCase();switch(t.level){case"info":e.attr("class","modal-header alert alert-info");break;case"danger":e.attr("class","modal-header alert alert-danger");break;case"success":e.attr("class","modal-header alert alert-success");break;case"warning":e.attr("class","modal-header alert alert-warning");break;default:e.attr("class","modal-header")}}},e=function(n){function i(n,t){return'<div class="alert alert-dismissable alert-'+(t?t.toLowerCase():"info")+'" role="alert"><button type="button" class="close" data-dismiss="alert">×<\/button>'+n+"<\/div>"}function t(t,r){var u=n("#notification");if(!u.length){console.warn("Could not append notification, cannot find container #notification on page.");return}u.append(i(t,r))}return{insert:t,info:function(n){t(n,"info")},danger:function(n){t(n,"danger")},success:function(n){t(n,"success")},warning:function(n){t(n,"warning")}}}(n),o=function(n){"use strict";var t=n('<div class="modal fade" data-backdrop="static" data-keyboard="false" tabindex="-1" role="dialog" aria-hidden="true" style="padding-top:15%; overflow-y:visible;"><div class="modal-dialog modal-m"><div class="modal-content"><div class="modal-header"><h3 style="margin:0;"><\/h3><\/div><div class="modal-body"><div class="progress progress-striped active" style="margin-bottom:0;"><div class="progress-bar" style="width: 100%"><\/div><\/div><\/div><\/div><\/div><\/div>'),i=null;return{show:function(r,u){typeof u=="undefined"&&(u={});typeof r=="undefined"&&(r="Моля, изчакайте");var f=n.extend({dialogSize:"m",progressType:"",onHide:null},u);if(t.find(".modal-dialog").attr("class","modal-dialog").addClass("modal-"+f.dialogSize),t.find(".progress-bar").attr("class","progress-bar"),f.progressType&&t.find(".progress-bar").addClass("progress-bar-"+f.progressType),t.find("h3").html(r),typeof f.onHide=="function")t.off("hidden.bs.modal").on("hidden.bs.modal",function(){i=clearTimeout(i);f.onHide.call(t)});t.modal();i||(i=setTimeout(function(){modal.wait.show("Операцията отнема твърде дълго.<br> Моля, презаредете страницата и опитайте отново.",{progressType:"danger"})},18e4))},hide:function(){i=clearTimeout(i);t.modal("hide")}}}(jQuery);return{wait:o,notification:e,info:function(i,r,u){t({title:i,content:r,no:u});n("#modalYES").hide();n("#smallModal").modal("show")},preview:function(t,i){var r=n("#previewModal");r.find(".modal-title").html(t);r.find(".modal-body").html(i);r.modal("show")},confirm:function(i,r,u){t({content:i});var f,e;f=function(){n("#modalYES").off("click",f);n("#modalNO").off("click",e);typeof r=="function"&&r()};e=function(){n("#modalYES").off("click",f);n("#modalNO").off("click",e);typeof u=="function"&&u()};n("#smallModal").modal("show");n("#modalYES").on("click",f);n("#modalNO").on("click",e)},popup:function(i,r){var u="Съобщение";r&&(r=r.toLowerCase());switch(r){case"info":u="Информация";break;case"danger":u="Грешка";break;case"success":u="Успех";break;case"warning":u="Внимание"}t({content:i,level:r,title:u,no:"Затвори"});n("#modalYES").hide();n("#smallModal").modal("show")}}}($);$(document).ready(function(){$(".submit-link").on("click",doSubmit);$('[data-popover="true"]').popover({trigger:"hover",placement:"top"});var n=$(".datepicker");n.length&&typeof n.datepicker=="function"&&$(".datepicker").datepicker({language:"bg-BG",format:"dd.mm.yyyy",autoclose:!0,weekStart:1});$("body").on("click",'a[href="#"]',function(n){n&&n.preventDefault()})});$(document).ajaxError(function(n,t){t.status===500&&modal.popup("500 - Грешка на сървъра<br><br>За съжаление, възникна непредвидена грешка. Моля, опитайте отново или се свържете с администратор, ако проблемът продължава да възниква.<br><br>","danger");t.status===400&&modal.popup("400 - Грешка в данните<br><br>За съжаление, в изпратените от Вас данни има грешка. Моля, променете данните и опитайте отново.<br><br>","danger");t.status===404&&modal.popup("404 - Не съществува<br><br>За съжаление, изискваният от Вас ресурс (вече) не съществува в системата.<br><br>","info");t.status===403&&modal.popup("403 - Забранен<br><br>За съжаление, операцията, която се опитвате да осъществиете надвишава правата Ви за достъп в системата.<br><br>","warning");modal.wait.hide()});