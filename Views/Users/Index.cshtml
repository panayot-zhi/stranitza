@model UserIndexViewModel

@{
    ViewData["Title"] = "Потребители";
    Layout = "~/Views/Shared/_LayoutAdmin.cshtml";
}

@section breadcrumb {
    <a asp-page="/Account/Manage/Admin" asp-area="Identity">Администрация</a>

    <span class="separator">/</span>

    <a asp-action="Index" asp-controller="Users">Потребители</a>
}

<div class="col-md-8 blog-main">

    @foreach (var user in Model.Records)
    {
        <div class="row credits">
            @await Html.PartialAsync("_User", user)
        </div>
    }

    @await Html.PartialAsync("_Paging", Model, new ViewDataDictionary(ViewData)
    {
        { "Next", "Напред" }, { "Previous", "Назад" }
    })

</div>

<aside class="col-md-4 blog-aside">
    
    <div class="aside-widget">
        <header>
            <h3>Филтър</h3>
        </header>
        <div class="body clearfix">
            <div class="tales-superblock" id="contact">
                    
                <form action="#" method="get" accept-charset="utf-8" class="contact-form">
                    <input type="text" name="name" id="contact-name" placeholder="Имена" class="form-control" value="@Model.Filter.Name">
                    <input type="text" name="userName" id="contact-username" placeholder="Псевдоним" class="form-control" value="@Model.Filter.UserName">
                    <input type="email" name="email" id="contact-email" placeholder="Email" class="form-control" value="@Model.Filter.Email">
                    <textarea rows="5" name="description" id="contact-body" placeholder="Описание..." class="form-control">@Model.Filter.Description</textarea>
                    
                    <div class="buttons clearfix">
                        <button type="submit" class="btn btn-xlarge btn-tales-one">Търси</button>
                    </div>                    
                </form>
            </div>
        </div>
    </div>

</aside>

@section scripts {
    <script>

        var thisUrl = '@Url.Action("Index", "Users")';
        $(document).ready(function() {
            $("form.contact-form").on("submit", function(e) {
                e.preventDefault();

                let me = this;
                let data = $(me).serialize();

                window.location.href = thisUrl + "?" + data;
            });
        });
    </script>
}
